webpackJsonp([1],[,,,,,,,,,,function(t,e,a){function n(t){a(40)}var i=a(1)(a(34),a(51),n,null,null);t.exports=i.exports},function(t,e,a){function n(t){a(44)}var i=a(1)(a(35),a(55),n,null,null);t.exports=i.exports},function(t,e,a){"use strict";var n=a(4),i=a(56),s=a(2),o=a.n(s),r=a(48),l=a.n(r),c=a(37),u=a(39),p=(a.n(u),a(38)),g=(a.n(p),a(49)),d=a.n(g),f=a(10),h=(a.n(f),a(11)),m=(a.n(h),a(50)),v=a.n(m);n.a.use(i.a),n.a.use(l.a,o.a),n.a.use(c.a),e.a=new i.a({routes:[{path:"/",name:"DisasterData",component:d.a,props:!0},{path:"/map",name:"DisasterMap",component:v.a}]})},function(t,e,a){function n(t){a(41)}var i=a(1)(a(31),a(52),n,null,null);t.exports=i.exports},,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",methods:{routeToData:function(){this.$router.push("/")},routeToMap:function(){this.$router.push("map")}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2),i=a.n(n),s=a(11),o=a.n(s),r=a(10),l=a.n(r);e.default={components:{DisasterTable:l.a,Pagination:o.a},data:function(){return{areas:["全部","萬華區","中正區","大同區","中山區","大安區","南港區","文山區","松山區","信義區","士林區","北投區","內湖區"],selectedArea:"全部",disasterData:[],headings:["CaseTime","CaseLocationDistrict","CaseLocationDescription","PName"],caseCount:0,pageLength:[{text:"10 筆/頁",value:10},{text:"20 筆/頁",value:20},{text:"50 筆/頁",value:50},{text:"100 筆/頁",value:100}],pagination:{range:5,currentPage:1,pageCount:10,sliceTotalPage:[]}}},mounted:function(){this.getData(),this.readyForPage()},computed:{dataFilterByArea:function(){var t=this,e=this.selectedArea;return this.disasterData.filter(function(a){return"全部"==e?a:a.CaseLocationDistrict.indexOf(e)>-1?t.disasterData:void 0})},totalPage:function(){return Math.ceil(this.dataFilterByArea.length/this.pagination.pageCount)},buildPage:function(){this.pagination.currentPage>this.totalPage&&(this.pagination.currentPage=1);var t=(this.pagination.currentPage-1)*this.pagination.pageCount,e=this.pagination.currentPage*this.pagination.pageCount;return this.dataFilterByArea.slice(t,e)},dataUncompleteCount:function(){this.caseCount=0;for(var t=0;t<this.dataFilterByArea.length;t++)"false"==this.dataFilterByArea[t].CaseComplete&&(this.caseCount+=1);return this.caseCount}},methods:{getData:function(){var t=this;i.a.get("https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json").then(function(e){t.disasterData=e.data.DataSet["diffgr:diffgram"].NewDataSet.CASE_SUMMARY}).catch(function(t){console.log(t)})},readyForPage:function(){this.pagination.currentPage=1;var t=(this.pagination.currentPage-1)*this.pagination.pageCount,e=this.pagination.currentPage*this.pagination.pageCount;return this.dataFilterByArea.slice(t,e)}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2),i=a.n(n);e.default={data:function(){return{areas:["全部","萬華區","中正區","大同區","中山區","大安區","南港區","文山區","松山區","信義區","士林區","北投區","內湖區"],selectedArea:"全部",powerData:[],filterData:[],infos:[]}},mounted:function(){this.getPowerData()},computed:{filteredByArea:function(){var t=this,e=this.selectedArea;return this.powerData.filter(function(a){return"全部"==e?a:a.CaseLocationDistrict.indexOf(e)>-1?t.powerData:void 0})}},methods:{getPowerData:function(){var t=this,e=document.getElementById("timeBar"),a=document.getElementById("locationBar"),n=document.getElementById("descriptionBar");i.a.get("https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json").then(function(i){var s=i.data.DataSet["diffgr:diffgram"].NewDataSet.CASE_SUMMARY;t.selectedArea;t.powerData=[],s.filter(function(t){if(t.Name.indexOf("電力停電")>-1)return t}).forEach(function(e){"false"==e.CaseComplete&&t.powerData.push(e)}),console.log(t.powerData);var o=new google.maps.LatLngBounds,r=document.getElementById("map"),l={zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP},c=new google.maps.Map(r,l);t.powerData.forEach(function(t){var i=t.Wgs84Y,s=t.Wgs84X,r=t.CaseTime,l=t.CaseLocationDescription,u=t.CaseDescription,p=new google.maps.LatLng(i,s);new google.maps.Marker({position:p,map:c}).addListener("click",function(t){console.log("hi"),e.innerHTML="時間: "+r,a.innerHTML="地點: "+l,n.innerHTML="描述: "+u}),c.fitBounds(o.extend(p))}),0==t.filterData.length&&(console.log("No case without power!"),t.withoutOffPowerData())}).catch(function(t){console.log(t)})},mappingDataByArea:function(t){var e=this,a=document.getElementById("timeBar"),n=document.getElementById("locationBar"),i=document.getElementById("descriptionBar");a.innerHTML="",n.innerHTML="",i.innerHTML="",this.filterData=[],this.powerData.filter(function(a){"全部"==t&&(e.filterData=e.powerData),a.CaseLocationDistrict.indexOf(t)>-1&&e.filterData.push(a)}),console.log(this.filterData);var s=new google.maps.LatLngBounds,o=document.getElementById("map"),r={zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP},l=new google.maps.Map(o,r);this.filterData.forEach(function(t){var e=t.Wgs84Y,o=t.Wgs84X,r=t.CaseTime,c=t.CaseLocationDescription,u=t.CaseDescription,p=new google.maps.LatLng(e,o);new google.maps.Marker({position:p,map:l}).addListener("click",function(){a.innerHTML="時間: "+r,n.innerHTML="地點: "+c,i.innerHTML="描述: "+u}),l.fitBounds(s.extend(p))}),0==this.filterData.length&&(console.log("No case without power!"),this.withoutOffPowerData())},withoutOffPowerData:function(){var t=document.getElementById("map"),e={zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,center:new google.maps.LatLng(25.0533102,121.542379)};new google.maps.Map(t,e)}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"disasterTable",props:["headings","dataFilterByArea","buildPage"],data:function(){return{opened:[],toggleSeen:!1}},methods:{changeRowName:function(t){return"CaseTime"==t?t="日期時間":"CaseLocationDistrict"==t?t="區域名稱":"CaseLocationDescription"==t?t="詳細地點":"PName"==t?t="災情分類":void 0},toggleRow:function(t){var e=this.opened.indexOf(t);e>-1?this.opened.splice(e,1):this.opened.push(t)},CaseIfComplete:function(t){return t="true"==t?"是":"否"}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"pagination",props:["dataFilterByArea","pageLength","pagination","totalPage"],mounted:function(){this.selectPage(1)},computed:{buildPagination:function(){var t=0,e=0,a=this.pagination.currentPage,n=this.pagination.range,i=this.totalPage;a<n-2?(t=1,e=t+n-1):a<=i&&a>i-n+2?(t=i-n+1,e=i):(t=this.pagination.currentPage-2,e=this.pagination.currentPage+2),t<1&&(t=1),e>i&&(e=i),this.pagination.sliceTotalPage=[];for(var s=t;s<=e;s++)this.pagination.sliceTotalPage.push(s);return this.pagination.sliceTotalPage}},methods:{selectPage:function(t){this.pagination.currentPage=t,0==this.pagination.currentPage&&(this.pagination.currentPage=1),this.pagination.currentPage>this.totalPage&&(this.pagination.currentPage=this.totalPage)}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(4),i=a(13),s=a.n(i),o=a(12);n.a.config.productionTip=!1,new n.a({el:"#app",router:o.a,template:"<App/>",components:{App:s.a}})},,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,function(t,e,a){function n(t){a(42)}var i=a(1)(a(32),a(53),n,null,null);t.exports=i.exports},function(t,e,a){function n(t){a(43)}var i=a(1)(a(33),a(54),n,null,null);t.exports=i.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DisasterTable outerContainer"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[t._l(t.headings,function(e){return a("th",[t._v(t._s(t.changeRowName(e)))])}),a("th")],2)]),t._l(t.buildPage,function(e,n){return a("tbody",[a("tr",{staticClass:"main",class:{opened:t.opened.includes(e)},on:{click:function(a){t.toggleRow(e)}}},[t._l(t.headings,function(n){return a("td",[t._v(t._s(e[n]))])}),a("td",{staticClass:"fa fa-chevron-right",attrs:{id:"arrow"},model:{value:t.toggleSeen,callback:function(e){t.toggleSeen=e},expression:"toggleSeen"}})],2),t.opened.includes(e)?a("tr",{staticClass:"subDescription"},[a("td",{attrs:{colspan:"5"}},[a("ul",[a("li",[a("span",{staticClass:"sub"},[t._v("災情細項類別")]),a("span",[t._v("： "+t._s(e.Name))])]),a("li",[a("span",{staticClass:"sub"},[t._v("災情描述")]),a("span",[t._v("： "+t._s(e.CaseDescription))])]),a("li",[a("span",{staticClass:"sub"},[t._v("災情通報單位")]),a("span",[t._v("： "+t._s(e.CaseCommunicatorUnit))])]),a("li",[a("span",{staticClass:"sub"},[t._v("是否已經處理完畢")]),a("span",[t._v("： "+t._s(t.CaseIfComplete(e.CaseComplete)))])])])])]):t._e()])})],2)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"row",attrs:{id:"topBar"}},[a("a",{staticClass:"col-xs-6 title",class:{active:"/"==this.$route.path},on:{click:t.routeToData}},[t._v("台北市颱風災情最新動態")]),a("a",{staticClass:"col-xs-6 title",class:{active:"/map"==this.$route.path},on:{click:t.routeToMap}},[t._v("停電地區")]),a("a",{staticClass:"col-xs-12 subtitle",attrs:{href:"https://taipeicity.github.io/eoc_119/",target:"_blank"}},[t._v("資料來源：台北市")])]),a("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DisasterData tableList"},[a("div",{staticClass:"row bar"},[a("div",{staticClass:"alert alert-info col-xs-12"},[a("p",[t._v("防災災情及相關諮詢電話：87863119分機8900~8907")]),a("p",[t._v("目前尚未處理完成的災情："+t._s(t.dataUncompleteCount)+" 件")])])]),a("div",{staticClass:"row bar"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedArea,expression:"selectedArea"}],staticClass:"col-xs-12 col-md-6 selectedArea",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedArea=e.target.multiple?a:a[0]}}},t._l(t.areas,function(e){return a("option",[t._v(t._s(e))])})),a("select",{directives:[{name:"model",rawName:"v-model",value:t.pagination.pageCount,expression:"pagination.pageCount"}],staticClass:"col-xs-12 col-md-6 seletedPage",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.pagination.pageCount=e.target.multiple?a:a[0]}}},t._l(t.pageLength,function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.text))])}))]),a("Pagination",{attrs:{dataFilterByArea:t.dataFilterByArea,pageLength:t.pageLength,pagination:t.pagination,totalPage:t.totalPage}}),a("br"),a("div",{staticClass:"row"},[a("DisasterTable",{attrs:{headings:t.headings,dataFilterByArea:t.dataFilterByArea,buildPage:t.buildPage}})],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DisasterMap"},[t._m(0),a("div",{staticClass:"row bar"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedArea,expression:"selectedArea"}],staticClass:"selectedArea",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedArea=e.target.multiple?a:a[0]},function(e){t.mappingDataByArea(t.selectedArea)}]}},t._l(t.areas,function(e){return a("option",[t._v(t._s(e))])}))]),a("br"),a("div",{staticClass:"row bar"},[a("div",{staticClass:"alert alert-success col-xs-12"},[a("p",[t._v("目前停電處尚有： "+t._s(t.filteredByArea.length)+" 處")]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.filteredByArea.length>0,expression:"filteredByArea.length>0"}],attrs:{id:"timeBar"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.filteredByArea.length>0,expression:"filteredByArea.length>0"}],attrs:{id:"locationBar"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.filteredByArea.length>0,expression:"filteredByArea.length>0"}],attrs:{id:"descriptionBar"}})])]),a("div",{attrs:{id:"map"}})])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row bar"},[a("div",{staticClass:"alert alert-info col-xs-12"},[a("p",[t._v("如有供電問題，請撥打台電客服1911。1040808")])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Pagination"},[a("div",{staticClass:"row"},[a("nav",{staticClass:"paginationBar col-xs-12"},[a("ul",[a("li",{class:{"is-disable":1==t.pagination.currentPage},on:{click:function(e){t.selectPage(1)}}},[t._m(0)]),a("li",{class:{"is-disable":1==t.pagination.currentPage},on:{click:function(e){t.selectPage(t.pagination.currentPage-1)}}},[t._m(1)]),t._l(t.buildPagination,function(e){return a("li",{class:{"is-info":e==t.pagination.currentPage},on:{click:function(a){t.selectPage(e)}}},[a("div",{staticClass:"button"},[t._v(t._s(e))])])}),a("li",{class:{"is-disable":t.pagination.currentPage==t.totalPage},on:{click:function(e){t.selectPage(t.pagination.currentPage+1)}}},[t._m(2)]),a("li",{class:{"is-disable":t.pagination.currentPage==t.totalPage},on:{click:function(e){t.selectPage(t.totalPage)}}},[t._m(3)])],2)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"button"},[a("i",{staticClass:"fa fa-angle-double-left"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"button"},[a("i",{staticClass:"fa fa-angle-left"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"button"},[a("i",{staticClass:"fa fa-angle-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"button"},[a("i",{staticClass:"fa fa-angle-double-right"})])}]}}],[36]);
//# sourceMappingURL=app.a9f13346158498526e96.js.map